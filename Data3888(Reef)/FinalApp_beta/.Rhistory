selecColoumn<- c("site_name","sample_date_year", "latitude","longitude", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2016<- fish2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
reef2018<- reef2018 %>% select(selecColoumn)
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2019<- reef2019 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2019<- fish2019 %>% select(selecColoumn)
selecColoumn <- c("site_name", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2021 <- reef2021 %>% select(selecColoumn)
library(readr)
library(dplyr)
# 合并所有reef数据集
all_reef_data <- rbind(reef2015, reef2016, reef2019, reef2021)
library(readr)
library(dplyr)
fish2015 <- read_csv("DataFromGeodie/2015 fishbiomass.csv")
reef2015 <- read_csv("DataFromGeodie/2015benthicdata.csv")
reef2016 <- read_csv("DataFromGeodie/karimunjawa2016benthicdata.csv")
fish2016 <- read_csv("DataFromGeodie/karimunjawa2016fishbiomass.csv")
reef2018 <- read_csv("DataFromGeodie/liang_ngali_mpa_2018fishbiomass.csv")
reef2019 <- read_csv("DataFromGeodie/karimunjawa2019benthicdata.csv")
fish2019 <- read_csv("DataFromGeodie/karimunjawa2019fishbiomass.csv")
reef2021 <- read_csv("DataFromGeodie/SE Sulawesi2021benthicdata.csv")
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2015<- reef2015 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2015<- fish2015 %>% select(selecColoumn)
selecColoumn <- c("site_name", "latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2016<- reef2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","sample_date_year", "latitude","longitude", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2016<- fish2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
reef2018<- reef2018 %>% select(selecColoumn)
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2019<- reef2019 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2019<- fish2019 %>% select(selecColoumn)
selecColoumn <- c("site_name", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2021 <- reef2021 %>% select(selecColoumn)
reef2015
reef2016
reef2019
reef2021
library(readr)
library(dplyr)
fish2015 <- read_csv("DataFromGeodie/2015 fishbiomass.csv")
reef2015 <- read_csv("DataFromGeodie/2015benthicdata.csv")
reef2016 <- read_csv("DataFromGeodie/karimunjawa2016benthicdata.csv")
fish2016 <- read_csv("DataFromGeodie/karimunjawa2016fishbiomass.csv")
reef2018 <- read_csv("DataFromGeodie/liang_ngali_mpa_2018fishbiomass.csv")
reef2019 <- read_csv("DataFromGeodie/karimunjawa2019benthicdata.csv")
fish2019 <- read_csv("DataFromGeodie/karimunjawa2019fishbiomass.csv")
reef2021 <- read_csv("DataFromGeodie/SE Sulawesi2021benthicdata.csv")
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2015<- reef2015 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2015<- fish2015 %>% select(selecColoumn)
selecColoumn <- c("site_name", "latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2016<- reef2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2016<- fish2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
reef2018<- reef2018 %>% select(selecColoumn)
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2019<- reef2019 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2019<- fish2019 %>% select(selecColoumn)
selecColoumn <- c("site_name", "latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2021 <- reef2021 %>% select(selecColoumn)
reef2015
reef2016
reef2019
reef2021
library(readr)
library(dplyr)
# 合并所有reef数据集
all_reef_data <- rbind(reef2015, reef2016, reef2019, reef2021)
# 合并所有fish数据集
all_fish_data <- rbind(fish2015, fish2016, fish2019)
# 将合并后的数据集保存为CSV文件
write_csv(all_reef_data, "all_reef_data.csv")
write_csv(all_fish_data, "all_fish_data.csv")
# 安装并加载plotly库
install.packages("plotly")
library(plotly)
# 按年份对reef和fish数据集进行分组并计算平均值
reef_data_by_year <- all_reef_data %>% group_by(sample_date_year) %>% summarise(avg_cover = mean(percent_cover_by_benthic_category_avg, na.rm = TRUE))
fish_data_by_year <- all_fish_data %>% group_by(sample_date_year) %>% summarise(avg_biomass = mean(biomass_kgha_by_fish_family_avg, na.rm = TRUE))
# 创建互动图表
reef_plot <- plot_ly(reef_data_by_year, x = ~sample_date_year, y = ~avg_cover, type = 'scatter', mode = 'lines+markers', name = 'Coral Cover') %>%
layout(title = "Average Coral Cover by Year",
xaxis = list(title = "Year"),
yaxis = list(title = "Average Coral Cover"))
fish_plot <- plot_ly(fish_data_by_year, x = ~sample_date_year, y = ~avg_biomass, type = 'scatter', mode = 'lines+markers', name = 'Fish Biomass') %>%
layout(title = "Average Fish Biomass by Year",
xaxis = list(title = "Year"),
yaxis = list(title = "Average Fish Biomass"))
# 显示互动图表
reef_plot
fish_plot
# 加载所需的库
library(leaflet)
# 创建一个颜色映射，以便为每个珊瑚类别分配一种颜色
category_colors <- colorFactor("viridis", domain = unique(reef_data_long$category))
# 加载所需的库
library(ggplot2)
library(plotly)
# 假设您的数据存储在名为reef_data的数据框中
reef_data_long <- all_reef_data %>%
gather(key = "category", value = "percent_cover", -c(site_name, latitude, longitude, sample_date_year, sample_date_month, sample_date_day, reef_exposure, reef_type, reef_zone, depth_avg))
library(tidyverse)
# 读取合并后的reef数据
all_reef_data <- read_csv("all_reef_data.csv")
# 将数据转换为长格式
reef_data_long <- all_reef_data %>%
gather(category, percent_cover, starts_with("percent_cover")) %>%
mutate(category = gsub("percent_cover_by_benthic_category_avg_", "", category))
# 查看转换后的数据
head(reef_data_long)
library(tidyverse)
# 读取合并后的reef数据
all_reef_data <- read_csv("all_reef_data.csv")
# 将数据转换为长格式
reef_data_long <- all_reef_data %>%
gather(category, percent_cover, starts_with("percent_cover")) %>%
mutate(category = gsub("percent_cover_by_benthic_category_avg_", "", category))
# 查看转换后的数据
View(reef_data_long)
library(tidyverse)
# 读取合并后的reef数据
all_reef_data <- read_csv("all_reef_data.csv")
# 将数据转换为长格式
reef_data_long <- all_reef_data %>%
gather(category, percent_cover, starts_with("percent_cover")) %>%
mutate(category = gsub("percent_cover_by_benthic_category_avg_", "", category))
library(tidyverse)
# 读取合并后的reef数据
all_reef_data <- read_csv("all_reef_data.csv")
# 将数据转换为长格式
reef_data_long <- all_reef_data %>%
gather(category, percent_cover, starts_with("percent_cover")) %>%
mutate(category = gsub("percent_cover_by_benthic_category_avg_", "", category))
reef_data_long
library(tidyverse)
all_fish_data
shiny::runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
install.packages("jsonlite")
install.packages("jsonlite")
install.packages("jsonlite")
shiny::runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
knitr::opts_chunk$set(echo = TRUE)
library(readr)
library(dplyr)
fish2015 <- read_csv("DataFromGeodie/2015 fishbiomass.csv")
reef2015 <- read_csv("DataFromGeodie/2015benthicdata.csv")
reef2016 <- read_csv("DataFromGeodie/karimunjawa2016benthicdata.csv")
fish2016 <- read_csv("DataFromGeodie/karimunjawa2016fishbiomass.csv")
reef2018 <- read_csv("DataFromGeodie/liang_ngali_mpa_2018fishbiomass.csv")
reef2019 <- read_csv("DataFromGeodie/karimunjawa2019benthicdata.csv")
fish2019 <- read_csv("DataFromGeodie/karimunjawa2019fishbiomass.csv")
reef2021 <- read_csv("DataFromGeodie/SE Sulawesi2021benthicdata.csv")
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2015<- reef2015 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2015<- fish2015 %>% select(selecColoumn)
selecColoumn <- c("site_name", "latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2016<- reef2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2016<- fish2016 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
reef2018<- reef2018 %>% select(selecColoumn)
selecColoumn <- c("site_name","latitude","longitude", "sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2019<- reef2019 %>% select(selecColoumn)
selecColoumn<- c("site_name","latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "biomass_kgha_by_fish_family_avg")
fish2019<- fish2019 %>% select(selecColoumn)
selecColoumn <- c("site_name", "latitude","longitude","sample_date_year", "sample_date_month", "sample_date_day", "reef_exposure", "reef_type", "reef_zone", "depth_avg", "percent_cover_by_benthic_category_avg")
reef2021 <- reef2021 %>% select(selecColoumn)
reef2015
reef2016
reef2019
reef2021
library(readr)
library(dplyr)
# 合并所有reef数据集
all_reef_data <- rbind(reef2015, reef2016, reef2019, reef2021)
# 合并所有fish数据集
all_fish_data <- rbind(fish2015, fish2016, fish2019)
# 将合并后的数据集保存为CSV文件
write_csv(all_reef_data, "all_reef_data.csv")
write_csv(all_fish_data, "all_fish_data.csv")
library(readr)
library(dplyr)
# 合并所有reef数据集
all_reef_data <- rbind(reef2015, reef2016, reef2019, reef2021)
# 合并所有fish数据集
all_fish_data <- rbind(fish2015, fish2016, fish2019)
# 将合并后的数据集保存为CSV文件
write_csv(all_reef_data, "all_reef_data.csv")
write_csv(all_fish_data, "all_fish_data.csv")
install.packages("leaflet")
library(leaflet)
# 从CSV文件中读取数据
data <- read.csv("all_fish_data.csv")
# 创建地图
map <- leaflet(data) %>%
addTiles() %>%
setView(lng = mean(data$longitude), lat = mean(data$latitude), zoom = 10) %>%
addCircleMarkers(
lng = ~longitude, lat = ~latitude,
radius = 5,
color = "red",
stroke = FALSE, fillOpacity = 0.8,
popup = ~paste0("<strong>Site Name: </strong>", site_name,
"<br><strong>Year: </strong>", sample_date_year,
"<br><strong>Month: </strong>", sample_date_month,
"<br><strong>Day: </strong>", sample_date_day,
"<br><strong>Biomass: </strong>", biomass_kgha_by_fish_family_avg)
)
map
library(leaflet)
# 从CSV文件中读取数据
data <- read.csv("all_fish_data.csv")
# 创建地图
map <- leaflet(data) %>%
addTiles() %>%
setView(lng = mean(data$longitude), lat = mean(data$latitude), zoom = 10) %>%
addCircleMarkers(
lng = ~longitude, lat = ~latitude,
radius = 5,
color = "red",
stroke = FALSE, fillOpacity = 0.8,
popup = ~paste0("<strong>Site Name: </strong>", site_name,
"<br><strong>Year: </strong>", sample_date_year,
"<br><strong>Month: </strong>", sample_date_month,
"<br><strong>Day: </strong>", sample_date_day,
"<br><strong>Biomass: </strong>", biomass_kgha_by_fish_family_avg)
)
map
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
library(shiny)
library(leaflet)
library(plotly)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
library(shiny)
library(leaflet)
library(plotly)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
popupGraphs <- function(data) {
popup_content <- vector("list", length = nrow(data))
for (i in 1:nrow(data)) {
biomass <- data$biomass_kgha_by_fish_family_avg[[i]]
plot <- plot_ly(x = names(biomass), y = unname(biomass), type = "bar", marker = list(color = "blue")) %>%
layout(title = paste0("Biomass for ", data$site_name[i]),
xaxis = list(title = "Fish Family"),
yaxis = list(title = "Biomass"))
popup_content[[i]] <- plotly::plotly_build(plot)
}
return(popup_content)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
print(popup_content)
runApp('Desktop/Data3888_dataSet')
library(shiny)
library(leaflet)
library(plotly)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
popupGraphs <- function(data) {
popup_content <- vector("list", length = nrow(data))
for (i in 1:nrow(data)) {
biomass <- data$biomass_kgha_by_fish_family_avg[[i]]
plot <- plot_ly(x = names(biomass), y = unname(biomass), type = "bar", marker = list(color = "blue")) %>%
layout(title = paste0("Biomass for ", data$site_name[i]),
xaxis = list(title = "Fish Family"),
yaxis = list(title = "Biomass"))
popup_content[[i]] <- plotly::plotly_build(plot)
}
return(popup_content)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
print(plotly::plotly_build(popup_content[[1]]))
library(shiny)
library(leaflet)
library(plotly)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
popupGraphs <- function(data) {
popup_content <- vector("list", length = nrow(data))
for (i in 1:nrow(data)) {
biomass <- data$biomass_kgha_by_fish_family_avg[[i]]
plot <- plot_ly(x = names(biomass), y = unname(biomass), type = "bar", marker = list(color = "blue")) %>%
layout(title = paste0("Biomass for ", data$site_name[i]),
xaxis = list(title = "Fish Family"),
yaxis = list(title = "Biomass"))
popup_content[[i]] <- plotly::plotly_build(plot)
}
return(popup_content)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
print(plotly::plotly_build(popup_content[[1]]))
library(shiny)
library(leaflet)
library(plotly)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
popupGraphs <- function(data) {
popup_content <- vector("list", length = nrow(data))
for (i in 1:nrow(data)) {
biomass <- data$biomass_kgha_by_fish_family_avg[[i]]
plot <- plot_ly(x = names(biomass), y = unname(biomass), type = "bar", marker = list(color = "blue")) %>%
layout(title = paste0("Biomass for ", data$site_name[i]),
xaxis = list(title = "Fish Family"),
yaxis = list(title = "Biomass"))
popup_content[[i]] <- plotly::plotly_build(plot)
}
return(popup_content)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
print(plotly::plotly_build(popup_content[[1]]))
plotly::plotly_build(popup_content[[1]])
install.packages("leaflet.extras")
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
install.packages("htmltools")
install.packages("htmltools")
runApp('Desktop/Data3888_dataSet')
shiny::runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
install.packages("leafpop")
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
runApp('Desktop/Data3888_dataSet')
?addPopupGraphs
runApp('Desktop/Data3888_dataSet')
knitr::opts_chunk$set(echo = TRUE)
library(shiny)
library(leaflet)
library(plotly)
convert_biomass_to_list <- function(biomass_string) {
biomass_string <- gsub("[{}]", "", biomass_string)
biomass_pairs <- strsplit(biomass_string, ",")[[1]]
biomass_list <- list()
for (pair in biomass_pairs) {
key_value <- strsplit(pair, ":")[[1]]
key <- trimws(key_value[1])
value <- as.numeric(trimws(key_value[2]))
biomass_list[[key]] <- value
}
return(biomass_list)
}
popupGraphs <- function(data) {
popup_content <- vector("list", length = nrow(data))
for (i in 1:nrow(data)) {
biomass <- data$biomass_kgha_by_fish_family_avg[[i]]
plot <- plot_ly(x = names(biomass), y = unname(biomass), type = "bar", marker = list(color = "blue")) %>%
layout(title = paste0("Biomass for ", data$site_name[i]),
xaxis = list(title = "Fish Family"),
yaxis = list(title = "Biomass"))
popup_content[[i]] <- plotly::plotly_build(plot)
}
return(popup_content)
}
biomass_string <- "{'Labridae': 27.39, 'Mullidae': 14.06, 'Scaridae': 27.1, 'Siganidae': 3.74, 'Apogonidae': 0.58, 'Balistidae': 4.7, 'Blenniidae': 0.05, 'Lutjanidae': 1.68, 'Serranidae': 9.89, 'Cirrhitidae': 0.35, 'Lethrinidae': 7.64, 'Acanthuridae': 43.76, 'Caesioinidae': 30.63, 'Nemipteridae': 4.03, 'Monacanthidae': 0.45, 'Pomacanthidae': 1.36, 'Pomacentridae': 50.86, 'Chaetodontidae': 6.83, 'Tetraodontidae': 0.54}"
biomass_list <- convert_biomass_to_list(biomass_string)
print(biomass_list)
test_data <- read.csv("all_fish_data.csv")
test_data <- test_data %>%
mutate(biomass_kgha_by_fish_family_avg = sapply(biomass_kgha_by_fish_family_avg, convert_biomass_to_list))
popup_content <- popupGraphs(test_data)
print(plotly::plotly_build(popup_content[[1]]))
plotly::plotly_build(popup_content[[1]])
shiny::runApp('Desktop/Fish Folder')
shiny::runApp('Desktop/Data3888Git/Data3888Reef8/FinalApp_beta')
shiny::runApp()
shiny::runApp()
runApp()
runApp()
install.packages("shinyalert")
runApp()
?shinyalert
shiny::runApp()
runApp()
runApp()
